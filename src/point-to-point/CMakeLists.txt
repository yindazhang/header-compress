set(mpi_sources)
set(mpi_headers)
set(mpi_libraries)

if(${ENABLE_MPI})
  set(mpi_sources
      model/point-to-point-remote-channel.cc
  )
  set(mpi_headers
      model/point-to-point-remote-channel.h
  )
  set(mpi_libraries
      ${libmpi}
      ${MPI_CXX_LIBRARIES}
  )
endif()

build_lib(
  LIBNAME point-to-point
  SOURCE_FILES
    ${mpi_sources}
    helper/point-to-point-helper.cc
    model/point-to-point-channel.cc
    model/point-to-point-net-device.cc
    model/ppp-header.cc
    model/mpls-header.cc
    model/rsvp-header.cc
    model/rsvp-object.cc
    model/rsvp-error-spec4.cc
    model/rsvp-error-spec6.cc
    model/rsvp-filter-spec4.cc
    model/rsvp-filter-spec6.cc
    model/rsvp-hop4.cc
    model/rsvp-hop6.cc
    model/rsvp-lsp4.cc
    model/rsvp-lsp6.cc
    model/rsvp-compress.cc
    model/rsvp-flow-spec.cc
    model/rsvp-sender-spec.cc
    model/rsvp-label-request.cc
    model/rsvp-label.cc
    model/rsvp-style.cc
    model/rsvp-time-value.cc
    model/point-to-point-queue.cc
    model/switch-node.cc
    model/nic-node.cc
  HEADER_FILES
    ${mpi_headers}
    helper/point-to-point-helper.h
    model/point-to-point-channel.h
    model/point-to-point-net-device.h
    model/ppp-header.h
    model/mpls-header.h
    model/rsvp-header.h
    model/rsvp-object.h
    model/rsvp-error-spec4.h
    model/rsvp-error-spec6.h
    model/rsvp-filter-spec4.h
    model/rsvp-filter-spec6.h
    model/rsvp-hop4.h
    model/rsvp-hop6.h
    model/rsvp-lsp4.h
    model/rsvp-lsp6.h
    model/rsvp-compress.h
    model/rsvp-flow-spec.h
    model/rsvp-sender-spec.h
    model/rsvp-label-request.h
    model/rsvp-label.h
    model/rsvp-style.h
    model/rsvp-time-value.h
    model/point-to-point-queue.h
    model/switch-node.h
    model/nic-node.h
  LIBRARIES_TO_LINK ${libnetwork}
                    ${mpi_libraries}
  TEST_SOURCES test/point-to-point-test.cc
)
